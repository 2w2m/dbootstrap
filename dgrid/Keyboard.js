//>>built
define("dgrid/Keyboard","dojo/_base/declare,dojo/aspect,dojo/on,./List,dojo/_base/lang,dojo/has,put-selector/put,dojo/_base/Deferred,dojo/_base/sniff".split(","),function(p,q,k,r,s,h,n,t){var u={checkbox:1,radio:1,button:1},v=/\bdgrid-cell\b/,w=/\bdgrid-row\b/;h.add("dom-contains",function(){return!!document.createElement("a").contains});return p([r],{pageSkip:10,tabIndex:0,postCreate:function(){function o(b){var h=b.target;return h.type&&(!u[h.type]||32==b.keyCode)}function j(g){function j(a,c,f){if(a=
b[b.cellNavigation?"cell":"row"](a))if(a=a.element){if(!c.bubbles)c.bubbles=!0;n(d,"!dgrid-focus[!tabIndex]");if(d){if(8>h("ie"))d.style.position="";c.cell=d;k.emit(a,"dgrid-cellfocusout",c)}d=a;c.cell=a;if(!f){if(8>h("ie"))a.style.position="relative";a.tabIndex=b.tabIndex;a.focus()}n(a,".dgrid-focus");k.emit(d,"dgrid-cellfocusin",s.mixin({parentType:c.type},c))}}for(var l=b.cellNavigation?v:w,d=g,m;(m=d.firstChild)&&m.tagName;)d=m;if(g===b.contentNode)q.after(b,"renderArray",function(a){return t.when(a,
function(a){if(l.test(d.className)&&(h("dom-contains")?g.contains(d):g.compareDocumentPosition(d)&8))return a;for(var f=0,i=g.getElementsByTagName("*"),e;e=i[f];++f)if(l.test(e.className)){d=e;break}d.tabIndex=b.tabIndex;return a})});else if(l.test(d.className))d.tabIndex=b.tabIndex;k(g,"mousedown",function(a){o(a)||j(a.target,a)});k(g,"keydown",function(a){if(!a.metaKey&&!a.altKey){var c=a.keyCode;if(!o(a)){var f={32:0,33:-b.pageSkip,34:b.pageSkip,37:-1,38:-1,39:1,40:1,35:1E4,36:-1E4}[c];if(!isNaN(f)){var i,
e=b.cell(d);if(37==c||39==c){if(!b.cellNavigation)return;c="right"}else c="down",i=e&&e.column&&e.column.id,e=b.row(d);f&&(e=e&&b[c](e,f,!0));if(f=e&&e.element){if(i)f=b.cell(f,i).element;if(b.cellNavigation){i=f.getElementsByTagName("input");for(var g,e=0;e<i.length;e++)if(c=i[e],(-1!=c.tabIndex||"lastValue"in c)&&!c.disabled){if(8>h("ie"))c.style.position="relative";c.focus();if(8>h("ie"))c.style.position="";g=!0;break}}j(f,a,g)}a.preventDefault()}}}})}this.inherited(arguments);var b=this;b.tabableHeader&&
j(b.headerNode);j(b.contentNode)}})});
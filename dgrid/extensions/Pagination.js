//>>built
define("dgrid/extensions/Pagination","../_StoreMixin,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,dojo/query,dojo/string,dojo/has,put-selector/put,dojo/i18n!./nls/pagination,dojo/_base/sniff,xstyle/css!../css/extensions/Pagination.css".split(","),function(r,s,t,o,j,k,p,m,b,q){return s([r],{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:[],showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){var f=this;this.inherited(arguments);
var c=this.paginationNode=b(this.footerNode,"div.dgrid-pagination"),a=this.paginationStatusNode=b(c,"div.dgrid-status"),g=this.pageSizeOptions;if(g.length){var d=b(c,"select.dgrid-page-size"),e;for(e=0;e<g.length;e++)b(d,"option",g[e],{value:g[e]});j(d,"change",function(){f.rowsPerPage=+d.value;f.gotoPage(1)})}a.innerHTML=p.substitute(q.status,{start:1,end:1,total:0});c=this.paginationNavigationNode=b(c,"div.dgrid-navigation");this.firstLastArrows&&b(c,"a[href=javascript:].dgrid-first","\u00ab");
this.previousNextArrows&&b(c,"a[href=javascript:].dgrid-previous","\u2039");this.paginationLinksNode=b(c,"span.dgrid-pagination-links");this.previousNextArrows&&b(c,"a[href=javascript:].dgrid-next","\u203a");this.firstLastArrows&&b(c,"a[href=javascript:].dgrid-last","\u00bb");j(c,"a:click",function(){var a=this.className,b,d;if(!(f._isLoading||-1<a.indexOf("dgrid-page-disabled")))b=f._currentPage,d=Math.ceil(f._total/f.rowsPerPage),"dgrid-page-link"==a&&f.gotoPage(+this.innerHTML,!0),"dgrid-first"==
a?f.gotoPage(1):"dgrid-previous"==a?1<b&&f.gotoPage(b-1):"dgrid-next"==a?b<d&&f.gotoPage(b+1):"dgrid-last"==a&&f.gotoPage(d)})},_updateNavigation:function(f){function c(c){var e;a.pagingTextBox&&c==d?(e=b(g,"input.dgrid-page-input[type=text][value=$]",d),a._pagingTextBoxHandle=j(e,"change",function(){var b=+this.value;!isNaN(b)&&0<b&&b<=i&&a.gotoPage(+this.value,!0)})):e=b(g,"a[href=javascript:]"+(c==d?".dgrid-page-disabled":"")+".dgrid-page-link",c);c==d&&f&&e.focus()}var a=this,g=this.paginationLinksNode,
d=this._currentPage,e=this.pagingLinks,h=this.paginationNavigationNode,i=Math.ceil(this._total/this.rowsPerPage),l=this._pagingTextBoxHandle;l&&l.remove();g.innerHTML="";k(".dgrid-first, .dgrid-previous",h).forEach(function(a){b(a,(1==d?".":"!")+"dgrid-page-disabled")});k(".dgrid-last, .dgrid-next",h).forEach(function(a){b(a,(d>=i?".":"!")+"dgrid-page-disabled")});if(e&&0<i){c(1);h=d-e;for(2<h?b(g,"span.dgrid-page-skip","..."):h=2;h<Math.min(d+e+1,i);h++)c(h);d+e+1<i&&b(g,"span.dgrid-page-skip","...");
c(i)}else a.pagingTextBox&&c(d)},refresh:function(){if(!this.store)throw Error("Pagination requires a store to operate.");this.inherited(arguments);this.gotoPage(1)},gotoPage:function(f,c){var a=this;this._trackError(function(){var g=a.rowsPerPage,d=(f-1)*g,e=t.mixin(a.get("queryOptions"),{start:d,count:g}),h,i=a.contentNode,l=a._rowIdToObject,j=5+a.id.length,k,n;for(k in l)a.row(k.substr(j)).remove();a._rowIdToObject={};i.innerHTML="";n=b(i,"div.dgrid-loading",a.loadingMessage);a._isLoading=!0;h=
a.store.query(a.query,e);return o.when(a.renderArray(h,n,e),function(){b(n,"!");delete a._isLoading;a.bodyNode.scrollTop=0;o.when(h.total,function(b){a.paginationStatusNode.innerHTML=p.substitute(q.status,{start:Math.min(d+1,b),end:Math.min(b,d+g),total:b});a._total=b;a._currentPage=f;a._updateNavigation(c)});(7>m("ie")||m("ie")&&m("quirks"))&&a.resize()},function(b){delete a._isLoading;throw b;})})}})});